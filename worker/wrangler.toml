name = "commentkit"
main = "src/index.ts"
compatibility_date = "2024-12-01"

# D1 Database binding - run `wrangler d1 create commentkit-db` and update the id
[[d1_databases]]
binding = "DB"
database_name = "commentkit-db"
database_id = "cce89088-e2cf-4b79-883d-22f5602473c6"

[vars]
ENVIRONMENT = "production"
BASE_URL = "https://commentkit.ankushkun.workers.dev"
FRONTEND_URL = "https://commentkit.ankush.one"
# Additional allowed CORS origins (comma-separated), verified site domains are automatically allowed
ALLOWED_ORIGINS = ""
# Privacy settings - disabled by default for GDPR compliance
# Set to "true" to enable IP address collection
COLLECT_IP_ADDRESS = "false"
# Set to "true" to enable user agent collection
COLLECT_USER_AGENT = "false"

# Dev environment overrides
[env.dev]
vars = { ENVIRONMENT = "development", BASE_URL = "http://localhost:8787", FRONTEND_URL = "http://localhost:3000" }

[[env.dev.d1_databases]]
binding = "DB"
database_name = "commentkit-db"
database_id = "PLACEHOLDER"

# Secrets (set via `wrangler secret put`):
# - JWT_SECRET
# - RESEND_API_KEY (for email)
